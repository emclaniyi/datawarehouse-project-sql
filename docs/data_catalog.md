# Olist E-Commerce Analytics: Gold Layer (Star Schema)

## üìå Project Overview
The **Gold Layer** is the final analytical stage of the Olist Data Warehouse. It transforms normalized **Silver** data into a **Star Schema** optimized for Business Intelligence (BI) tools, high-speed reporting, and trend analysis.

---

## üèóÔ∏è Data Architecture: The Star Schema
This layer follows a dimensional modeling approach, consisting of a central **Fact Table** surrounded by **Dimension Tables**. 



### Benefits of this Model:
* **Performance:** Reduced joins for common analytical queries.
* **Simplicity:** Easy for business users to understand and query.
* **Consistency:** Standardized attributes (like English category names) across all reports.

---

## üìö Data Catalog

### 1. Fact Tables
#### `gold.fact_sales`
**Description:** The central transaction table. Each row represents a single product item sold within an order.  
**Grain:** One row per `order_id` + `order_item_id`.

| Column | Data Type | Source Table | Description |
| :--- | :--- | :--- | :--- |
| **order_id** | NVARCHAR | `silver.olist_orders` | Unique transaction identifier. |
| **order_item_id** | INT | `silver.olist_order_items` | Item sequence number within the order. |
| **customer_id** | NVARCHAR | `silver.olist_orders` | Link to the customer session dimension. |
| **product_id** | NVARCHAR | `silver.olist_order_items` | Foreign Key to `gold.dim_products`. |
| **seller_id** | NVARCHAR | `silver.olist_order_items` | Foreign Key to `gold.dim_sellers`. |
| **price** | DECIMAL | `silver.olist_order_items` | Revenue generated by the item. |
| **freight_value** | DECIMAL | `silver.olist_order_items` | Shipping cost associated with the item. |
| **order_date** | INT | `silver.olist_orders` | Date identifier (YYYYMMDD) for `silver.olist_orders`. |
| **order_status** | NVARCHAR | `silver.olist_orders` | Current state (e.g., delivered, canceled). |
| **is_late** | NVARCHAR | `silver.olist_orders` | Flag indicating 'late delivery' or 'on time'. |

---

### 2. Dimension Tables

#### `gold.dim_products`
**Description:** Comprehensive product catalog including translated categories and physical specs.

| Column | Data Type | Source Table | Description |
| :--- | :--- | :--- | :--- |
| **product_id** | NVARCHAR | `silver.olist_products` | Primary Key. |
| **product_category_name** | NVARCHAR | `silver.product_name_translation` | Product category name in English. |
| **product_weight_g** | INT | `silver.olist_products` | Weight of the product in grams. |
| **product_length_cm** | INT | `silver.olist_products` | Weight of the product in grams. |
| **product_height_cm** | INT | `silver.olist_products` | Weight of the product in grams. |

#### `gold.dim_customers`
**Description:** Unique customer profiles based on the `customer_unique_id`.

| Column | Data Type | Source Table | Description |
| :--- | :--- | :--- | :--- |
| **customer_unique_id** | NVARCHAR | `silver.olist_customers` | Primary Key (Actual Person ID). |
| **customer_id** | NVARCHAR | `silver.olist_customers` | Foreign Key transaction ID). |
| **customer_zip_code_prefix** | NVARCHAR | `silver.olist_customers` | Cleaned and standardized zip code. |
| **customer_city** | NVARCHAR | `silver.olist_customers` | Cleaned and standardized city name. |
| **customer_state** | NVARCHAR | `silver.olist_customers` | State abbreviation (e.g., SP, RJ). |

#### `gold.dim_sellers`
**Description:** Details of sellers registered on the Olist platform.

| Column | Data Type | Source Table | Description |
| :--- | :--- | :--- | :--- |
| **seller_id** | NVARCHAR | `silver.olist_sellers` | Primary Key. |
| **seller_zip_code_prefix** | NVARCHAR | `silver.olist_sellers` | Cleaned and standardized zip code. |
| **seller_city** | NVARCHAR | `silver.olist_sellers` | Seller's primary city. |
| **seller_state** | NVARCHAR | `silver.olist_sellers` | Seller's primary state. |

#### `gold.dim_date`
**Description:** Standard calendar dimension for time-series analysis.

| Column | Data Type | Description |
| :--- | :--- | :--- |
| **date_key** | INT | Primary Key in YYYYMMDD format. |
| **full_date** | DATE | Standard SQL Date object. |
| **year** | INT | Calendar Year. |
| **month_name** | NVARCHAR | Full month name (e.g., January). |
| **is_weekend** | BIT | Flag (1/0) indicating if the day is a weekend. |

---

## üõ†Ô∏è Data Transformation & Quality Logic
To ensure the Gold layer is accurate, the following logic was applied during the pipeline:
1.  **Date Alignment:** Handled 1,359 records where approval dates were logically impossible (appearing after shipping dates) by capping them at the shipping timestamp.
2.  **Review Repair:** Fixed "shifted" data in the reviews table where embedded commas in text caused misalignment across columns.
3.  **Deduplication:** Applied `ROW_NUMBER()` logic to `olist_customers` to ensure `dim_customers` contains unique individuals rather than transaction IDs.
4.  **Anomaly Removal:** Excluded 23 records where the shipping date was recorded as later than the delivery date.

---